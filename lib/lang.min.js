/*!
 *  Lang.js for Laravel localization in JavaScript.
 *
 *  @version 1.0.0
 *  @license MIT
 *  @site    https://github.com/rmariuzzo/Lang.js
 *  @author  Rubens Mariuzzo <rubens@mariuzzo.com>
 */
"use strict";(function(root,factory){if(typeof define==="function"&&define.amd){define([],new(factory()))}else if(typeof exports==="object"){module.exports=new(factory())}else{root.Lang=new(factory())}})(this,function(){var defaults={defaultLocale:"en"};var Lang=function(options){options=options||{};this.defaultLocale=options.defaultLocale||defaults.defaultLocale};Lang.prototype.setMessages=function(messages){this.messages=messages};Lang.prototype.get=function(key,replacements){if(!this.has(key)){return key}var message=this._getMessage(key,replacements);if(message===null){return key}if(replacements){message=this._applyReplacements(message,replacements)}return message};Lang.prototype.has=function(key){if(typeof key!=="string"||!this.messages){return false}return this._getMessage(key)!==null};Lang.prototype.choice=function(key,count,replacements){replacements=typeof replacements!=="undefined"?replacements:{};replacements["count"]=count;var message=this.get(key,replacements);if(message===null||message===undefined){return message}var messageParts=message.split("|");var explicitRules=[];var regex=/{\d+}\s(.+)|\[\d+,\d+\]\s(.+)|\[\d+,Inf\]\s(.+)/;for(var i=0;i<messageParts.length;i++){messageParts[i]=messageParts[i].trim();if(regex.test(messageParts[i])){var messageSpaceSplit=messageParts[i].split(/\s/);explicitRules.push(messageSpaceSplit.shift());messageParts[i]=messageSpaceSplit.join(" ")}}if(messageParts.length===1){return message}for(var i=0;i<explicitRules.length;i++){if(this._testInterval(count,explicitRules[i])){return messageParts[i]}}if(count>1){return messageParts[1]}else{return messageParts[0]}};Lang.prototype.setLocale=function(locale){this.locale=locale};Lang.prototype.getLocale=function(){return this.locale||this.defaultLocale};Lang.prototype._parseKey=function(key){if(typeof key!=="string"){return null}var segments=key.split(".");return{source:this.getLocale()+"."+segments[0],entries:segments.slice(1)}};Lang.prototype._getMessage=function(key){key=this._parseKey(key);if(this.messages[key.source]===undefined){return null}var message=this.messages[key.source];while(key.entries.length&&(message=message[key.entries.shift()]));if(typeof message!=="string"){return null}return message};Lang.prototype._applyReplacements=function(message,replacements){for(var replace in replacements){message=message.split(":"+replace).join(replacements[replace])}return message};Lang.prototype._testInterval=function(count,interval){return false};return Lang});